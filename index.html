<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Study Timer + Pomodoro + Todo</title>

<style>
body{
    font-family:Arial;
    background:#121417;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:30px;
}

h1,h2{margin:10px;}

#time{
    font-size:70px;
    margin:20px 0;
}

button{
    padding:8px 14px;
    margin:5px;
    border-radius:8px;
    border:none;
    cursor:pointer;
}

.todo{
    margin-top:40px;
    width:350px;
}

.todo input{
    width:70%;
    padding:8px;
}

.todo li{
    background:#1e1e1e;
    margin-top:8px;
    padding:6px;
    border-radius:6px;
    display:flex;
    justify-content:space-between;
}
</style>
</head>

<body>

<h1>Study Timer ‚è±Ô∏è</h1>

<h2 id="mode">Normal Timer</h2>
<div id="time">00:00</div>

<button onclick="start()">Start</button>
<button onclick="stop()">Stop</button>
<button onclick="reset()">Reset</button>
<button onclick="toggleFullscreen()">Fullscreen</button>

<br>

<button onclick="setNormal()">Normal</button>
<button onclick="setPomodoro()">Pomodoro 25/5</button>

<br><br>

<!-- Sounds -->
<select id="soundSelect">
<option value="">No Sound</option>
<option value="peace">Peaceful Solitude</option>
<option value="calm">Calm Your Mind</option>
<option value="sleep">Go To Bed It's Late</option>
<option value="rain">Rain üåßÔ∏è</option>
</select>


<!-- TODO -->
<div class="todo">
<h2>To-Do List</h2>
<input id="taskInput" placeholder="Add task...">
<button onclick="addTask()">Add</button>
<ul id="taskList"></ul>
</div>


<script>
/* ================= TIMER CORE ================= */
let seconds = 0;
let interval = null;
let mode = "normal";
let isBreak = false;

function updateDisplay(){
    let m = String(Math.floor(seconds/60)).padStart(2,'0');
    let s = String(seconds%60).padStart(2,'0');
    document.getElementById("time").innerText = m+":"+s;
}

/* START */
function start(){
    if(interval) return;

    interval = setInterval(()=>{

        if(mode==="normal"){
            seconds++;
        }

        else if(mode==="pomodoro"){
            seconds--;

            if(seconds <= 0){
                if(isBreak){
                    seconds = 25*60;
                    isBreak = false;
                    alert("Break over! Study time üí™");
                }else{
                    seconds = 5*60;
                    isBreak = true;
                    alert("Take a break ‚òï");
                }
            }
        }

        updateDisplay();

    },1000);
}

/* STOP */
function stop(){
    clearInterval(interval);
    interval=null;
}

/* RESET */
function reset(){
    stop();
    if(mode==="normal") seconds=0;
    if(mode==="pomodoro") seconds=25*60;
    isBreak=false;
    updateDisplay();
}

/* MODES */
function setNormal(){
    mode="normal";
    seconds=0;
    document.getElementById("mode").innerText="Normal Timer";
    updateDisplay();
}

function setPomodoro(){
    mode="pomodoro";
    seconds=25*60;
    isBreak=false;
    document.getElementById("mode").innerText="Pomodoro 25/5";
    updateDisplay();
}


/* ================= FULLSCREEN SAFE ================= */
function toggleFullscreen(){
    if(!document.fullscreenElement){
        document.documentElement.requestFullscreen().catch(()=>{});
    } else {
        document.exitFullscreen().catch(()=>{});
    }
}


/* ================= TODO LIST ================= */
function addTask(){
    const text = taskInput.value.trim();
    if(!text) return;

    const li=document.createElement("li");
    const span=document.createElement("span");
    span.innerText=text;

    const edit=document.createElement("button");
    edit.innerText="Edit";
    edit.onclick=()=>{
        let t=prompt("Edit task:",span.innerText);
        if(t) span.innerText=t;
    }

    const del=document.createElement("button");
    del.innerText="Delete";
    del.onclick=()=>li.remove();

    const box=document.createElement("div");
    box.append(edit,del);

    li.append(span,box);
    taskList.appendChild(li);

    taskInput.value="";
}


/* ================= SOUNDS ================= */
const sounds={
peace:new Audio("peace.mp3"),
calm:new Audio("calm.mp3"),
sleep:new Audio("sleep.mp3"),
Firewood:new Audio("Firewood.mp3")
};

soundSelect.onchange=function(){
    Object.values(sounds).forEach(a=>{
        a.pause();
        a.currentTime=0;
    });

    if(this.value){
        sounds[this.value].loop=true;
        sounds[this.value].play();
    }
};
</script>

</body>
</html>

